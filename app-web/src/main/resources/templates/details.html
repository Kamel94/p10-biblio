<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="layout">
<head>
    <meta charset="UTF-8">
    <title>Livres</title>
    <link rel="stylesheet" type="text/css"
          href="../static/css/bootstrap.min.css"
          th:href="@{/css/bootstrap.min.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/style.css}" />
</head>
<body>
<div layout:fragment="content">
<h1 class="mt-3 mb-5 container-fluid text-center">[[${livre.titre}]]</h1>
<div class="container">
    <div class="row">
        <div class="col-md-2 mt-3">
        <img th:src="${livre.couverture}" style="width:150px;height:200px; border:0px;" class="img-rounded">
                </div>
        <div class="col float-left">
        <table class="btn-titre">
        <tbody>
        <tr>
            <td><strong class="text-primary"></strong> &nbsp; &nbsp; &nbsp; </td>
        </tr>
        <tr>
            <td><strong class="text-primary">Auteur : </strong> &nbsp; &nbsp; &nbsp; [[${livre.auteur}]]</td>
        </tr>
        <tr>
            <td><strong class="text-primary"><br>Editeur : </strong> &nbsp; &nbsp; &nbsp; [[${livre.editeur}]]</td>
        </tr>
        <tr>
            <td class="mt-3"><strong class="text-primary"><br>Date d'édition : </strong> &nbsp; &nbsp; &nbsp; [[${livre.editionString}]]</td>
        </tr>
        </tbody>
    </table>
        </div>
        <div class="col-md-6">
            <dl class="mt-3">
                <dt class="text-primary">Description </dt>
                <dd> &nbsp; &nbsp; &nbsp; <br>[[${livre.description}]]</dd>
            </dl>
        </div>
    </div>
        <div class="row">
        <table class="table col-12 bg-light text-info mt-5">
            <tbody>
            <tr>
                <td class="mt-3">
                    <strong class="text-info"><br>Nombre d'exemplaire disponible </strong>  &nbsp;
                </td>
                <td class="mt-3">
                    <strong class="text-info"><br>Nombre de prêt en cours </strong>  &nbsp;
                </td>
                <td class="mt-3">
                    <strong class="text-info"><br>Nombre de réservation </strong>  &nbsp;
                </td>
                <td>
                <strong class="text-info"><br>Date retour </strong>  &nbsp;
                </td>
                <td>
                    <strong class="text-info"><br>Réservation </strong>  &nbsp;
                </td>
            </tr>
            <tr class="text-dark text-center">
                <td class="mt-3">
                    <span th:text="${exemplaire.nombreExemplaire}"></span>
                </td>
                <td class="mt-3"
                    th:if="${sizeList == 0}">
                <span th:text="${sizeList}"></span>
                </td>
                <td class="mt-3"
                    th:if="${sizeList != 0}">
                    <span th:text="${pretsOrderByDate.size()}"></span>
                </td>
                <td class="mt-3"
                    th:if="${sizeListAttente == 0}">
                    <span th:text="${sizeListAttente}"></span>
                </td>
                <td class="mt-3"
                    th:if="${sizeListAttente != 0}">
                    <span th:text="${statutAttente.size()}"></span>
                </td>
                <td class="mt-3">
                    <span th:text="${pretsOrderByDate.get(0).dateRetourString}"></span>
                </td>
                <td class="mt-3">
                    <a class="btn btn-info btn-titre rond-lege btn-sm"
                       th:if="${utilisateur.id} != 0 and ${nombreExemplaire} > ${statutAttente.size()} and ${p.utilisateurId} != ${utilisateur.id}"
                       th:href="@{/usager/ajoutPret/{utilisateurId}/{exemplaireId}/{livreId}(utilisateurId=${utilisateur.id}, exemplaireId=${exemplaire.id}, livreId=${livre.id})}">
                        Réserver</a>
                    <a class="disabled btn btn-danger btn-titre rond-lege btn-sm"
                       th:if="${utilisateur.id} != 0 and ${nombreExemplaire} > ${statutAttente.size()} and ${p.utilisateurId} == ${utilisateur.id}">
                        Déjà réservé
                    </a>
                    <a class="disabled btn btn-danger btn-titre rond-lege btn-sm"
                       th:if="${utilisateur.id} != 0 and ${nombreExemplaire} <= ${statutAttente.size()} and ${p.utilisateurId} == ${utilisateur.id}">
                        Déjà réservé
                    </a>
                    <a class="disabled btn btn-danger btn-titre rond-lege btn-sm"
                       th:if="${utilisateur.id} != 0 and ${nombreExemplaire} <= ${statutAttente.size()} and ${p.utilisateurId} == 0">
                        Non disponible
                    </a>
                    <a th:if="${utilisateur.id} == 0"
                       th:href="@{/login}">
                        Vous devez vous identifier pour réserver
                    </a>
                </td>
            </tr>
            </tbody>
        </table>
        </div>
    <br><br><br><br><br>
    <br><br><br><br><br>
    <br><br>
</div>
</div>
</body>
</html>